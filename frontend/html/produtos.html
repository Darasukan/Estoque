<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CatÃ¡logo - Almoxarifado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div id="navbarContainer"></div>

  <div class="container">
    <main class="main-content">
      <h1 class="pagina-titulo"><i class="bi bi-box-seam"></i> CatÃ¡logo de Itens</h1>

      <div id="mensagem" class="mensagem"></div>

      <!-- Resumo -->
      <div class="resumo">
        <div class="resumo-card">
          <div class="numero" id="totalItens">0</div>
          <div class="label">Total de Itens</div>
        </div>
        <div class="resumo-card">
          <div class="numero" id="totalCategorias">0</div>
          <div class="label">Categorias</div>
        </div>
        <div class="resumo-card alerta">
          <div class="numero" id="itensCriticos">0</div>
          <div class="label">Estoque CrÃ­tico</div>
        </div>
        <div class="resumo-card ok">
          <div class="numero" id="itensOk">0</div>
          <div class="label">Estoque OK</div>
        </div>
      </div>

      <!-- Layout com Sidebar -->
      <div class="catalogo-layout">
        <!-- Sidebar de Filtros -->
        <aside class="catalogo-sidebar">
          <div class="sidebar-header">
            <h3><i class="bi bi-funnel"></i> Filtros</h3>
            <button type="button" class="btn-limpar-filtros" id="btnLimparFiltros">
              <i class="bi bi-x-circle"></i> Limpar
            </button>
          </div>

          <!-- Busca Global -->
          <div class="filtro-grupo">
            <label for="filtroBusca"><i class="bi bi-search"></i> Busca</label>
            <input type="text" id="filtroBusca" placeholder="Categoria, subcategoria, atributos...">
            <small class="filtro-hint">Busca em todos os campos do item</small>
          </div>

          <!-- Categoria -->
          <div class="filtro-grupo">
            <label for="filtroCategoria"><i class="bi bi-folder"></i> Categoria</label>
            <select id="filtroCategoria">
              <option value="">Todas</option>
            </select>
          </div>

          <!-- Subcategoria -->
          <div class="filtro-grupo">
            <label for="filtroSubcategoria"><i class="bi bi-folder2"></i> Subcategoria</label>
            <select id="filtroSubcategoria" disabled>
              <option value="">Todas</option>
            </select>
          </div>

          <!-- Atributos (dinÃ¢mico baseado na subcategoria) -->
          <div class="filtro-grupo" id="filtroAtributosContainer" style="display: none;">
            <label><i class="bi bi-tags"></i> Atributos</label>
            <div id="filtroAtributos" class="filtro-atributos">
              <!-- Preenchido via JS -->
            </div>
          </div>

          <!-- SituaÃ§Ã£o Estoque -->
          <div class="filtro-grupo">
            <label for="filtroEstoque"><i class="bi bi-box-seam"></i> SituaÃ§Ã£o</label>
            <select id="filtroEstoque">
              <option value="">Todos</option>
              <option value="critico">ðŸ”´ CrÃ­tico (zerado)</option>
              <option value="baixo">ðŸŸ¡ Abaixo do mÃ­nimo</option>
              <option value="ok">ðŸŸ¢ Estoque OK</option>
            </select>
          </div>

          <!-- Contador de resultados -->
          <div class="filtro-resultado">
            <span id="contadorResultados">0 itens encontrados</span>
          </div>

          <!-- AÃ§Ãµes Admin -->
          <div id="acoesAdminCatalogo" class="admin-acoes-sidebar" style="display: none;">
            <hr>
            <label><i class="bi bi-gear"></i> AÃ§Ãµes Admin</label>
            <button type="button" class="btn-admin-acao" onclick="redefinirTodosIds()">
              <i class="bi bi-arrow-repeat"></i> Redefinir IDs (AUTO1, AUTO2...)
            </button>
          </div>
        </aside>

        <!-- Ãrea Principal -->
        <div class="catalogo-content">
          <div class="tabela-container">
            <table id="tabelaItens">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Item</th>
                  <th>Atributos</th>
                  <th>Estoque</th>
                  <th>Unid.</th>
                  <th>MÃ­n.</th>
                  <th>Status</th>
                  <th id="colAcoesCatalogo" style="display: none;">AÃ§Ãµes</th>
                </tr>
              </thead>
              <tbody id="listaItens">
                <tr>
                  <td colspan="8" class="vazio">
                    <div class="vazio-icon"><i class="bi bi-box"></i></div>
                    <p>Nenhum item cadastrado ainda.</p>
                    <p>VÃ¡ em <strong>Novo Item</strong> para criar itens.</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="../js/sidebar.js"></script>
  <script src="../js/catalogo.js"></script>
</body>
</html>
