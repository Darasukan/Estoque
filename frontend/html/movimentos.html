<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MovimentaÃ§Ãµes - Almoxarifado</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div id="navbarContainer"></div>

  <div class="container">
    <main class="main-content">
      <h1 class="pagina-titulo">ðŸ“¥ MovimentaÃ§Ãµes</h1>

      <div id="mensagem" class="mensagem"></div>

      <div class="tab-container">
        <button class="tab-btn tab-entrada ativo" data-tab="entrada">ðŸ“¥ Nova Entrada</button>
        <button class="tab-btn tab-saida" data-tab="saida">ðŸ“¤ Nova SaÃ­da</button>
        <button class="tab-btn" data-tab="historico">ðŸ“‹ HistÃ³rico</button>
      </div>

      <!-- ================== ABA ENTRADA ================== -->
      <div id="tab-entrada" class="tab-content ativo">
        <div class="painel entrada">
          <h2><i class="bi bi-box-arrow-in-down"></i> Registrar Entrada</h2>

          <div class="info-box">
            <i class="bi bi-info-circle"></i> Registre o recebimento de materiais no almoxarifado.
          </div>

          <form id="formEntrada">
            <!-- Linha 1: ID (skip tab), Categoria, Subcategoria, Item -->
            <div class="form-row-quatro">
              <div class="form-grupo">
                <label for="idEntrada">ID <span class="opcional">(auto)</span></label>
                <input type="text" id="idEntrada" placeholder="AutomÃ¡tico" tabindex="-1">
              </div>
              <div class="form-grupo">
                <label for="categoriaEntrada">Categoria *</label>
                <select id="categoriaEntrada" required>
                  <option value="">Selecione</option>
                </select>
              </div>
              <div class="form-grupo">
                <label for="subcategoriaEntrada">Subcategoria *</label>
                <select id="subcategoriaEntrada" required disabled>
                  <option value="">Selecione categoria</option>
                </select>
              </div>
              <div class="form-grupo form-grupo-item">
                <label for="itemEntrada">Item *</label>
                <div class="item-search-wrapper">
                  <input type="text" id="buscaItemEntrada" class="busca-item-input" placeholder="ðŸ” Filtrar itens..." autocomplete="off">
                  <select id="itemEntrada" required disabled>
                    <option value="">Selecione subcategoria</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Info do item selecionado -->
            <div id="itemSelecionadoEntrada" class="item-selecionado" style="display: none;">
              <div class="item-info-header">
                <i class="bi bi-pin-angle-fill"></i>
                <span class="nome" id="nomeItemEntrada">-</span>
              </div>
              <div class="detalhes">
                <div class="detalhe"><i class="bi bi-box"></i> Estoque: <strong id="estoqueItemEntrada">0</strong></div>
                <div class="detalhe"><i class="bi bi-rulers"></i> Unidade: <strong id="unidadeItemEntrada">UN</strong></div>
                <div class="detalhe"><i class="bi bi-exclamation-triangle"></i> MÃ­nimo: <strong id="minimoItemEntrada">10</strong></div>
              </div>
            </div>

            <!-- Linha 2: Quantidade, Data -->
            <div class="form-row">
              <div class="form-grupo">
                <label for="qtdEntrada">Quantidade *</label>
                <input type="number" id="qtdEntrada" required min="1" placeholder="0">
              </div>
              <div class="form-grupo">
                <label for="dataEntrada">Data *</label>
                <input type="date" id="dataEntrada" required>
              </div>
            </div>

            <!-- Linha 3: Valor unitÃ¡rio, Nota Fiscal, Fornecedor, Operador -->
            <div class="form-row-quatro">
              <div class="form-grupo">
                <label for="valorUnitarioEntrada">Valor UnitÃ¡rio <span class="opcional">(opc)</span></label>
                <input type="text" id="valorUnitarioEntrada" placeholder="R$ 0,00">
              </div>
              <div class="form-grupo">
                <label for="nfEntrada">Nota Fiscal <span class="opcional">(opc)</span></label>
                <input type="text" id="nfEntrada" placeholder="NÂº NF">
              </div>
              <div class="form-grupo">
                <label for="fornecedorEntrada">Fornecedor <span class="opcional">(opc)</span></label>
                <input type="text" id="fornecedorEntrada" placeholder="Nome do fornecedor">
              </div>
              <div class="form-grupo">
                <label for="operadorEntrada">Operador *</label>
                <input type="text" id="operadorEntrada" required placeholder="Quem registrou">
              </div>
            </div>

            <div class="btn-group">
              <button type="submit" class="btn btn-entrada"><i class="bi bi-check-lg"></i> Registrar Entrada</button>
              <button type="reset" class="btn btn-secondary"><i class="bi bi-arrow-clockwise"></i> Limpar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- ================== ABA SAÃDA ================== -->
      <div id="tab-saida" class="tab-content">
        <div class="painel saida">
          <h2><i class="bi bi-box-arrow-up"></i> Registrar SaÃ­da</h2>

          <div class="info-box">
            <i class="bi bi-info-circle"></i> Registre a retirada de materiais do almoxarifado.
          </div>

          <form id="formSaida">
            <!-- Linha 1: ID (skip tab), Categoria, Subcategoria, Item -->
            <div class="form-row-quatro">
              <div class="form-grupo">
                <label for="idSaida">ID <span class="opcional">(auto)</span></label>
                <input type="text" id="idSaida" placeholder="AutomÃ¡tico" tabindex="-1">
              </div>
              <div class="form-grupo">
                <label for="categoriaSaida">Categoria *</label>
                <select id="categoriaSaida" required>
                  <option value="">Selecione</option>
                </select>
              </div>
              <div class="form-grupo">
                <label for="subcategoriaSaida">Subcategoria *</label>
                <select id="subcategoriaSaida" required disabled>
                  <option value="">Selecione categoria</option>
                </select>
              </div>
              <div class="form-grupo form-grupo-item">
                <label for="itemSaida">Item *</label>
                <div class="item-search-wrapper">
                  <input type="text" id="buscaItemSaida" class="busca-item-input" placeholder="ðŸ” Filtrar itens..." autocomplete="off">
                  <select id="itemSaida" required disabled>
                    <option value="">Selecione subcategoria</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Info do item selecionado -->
            <div id="itemSelecionadoSaida" class="item-selecionado" style="display: none;">
              <div class="item-info-header">
                <i class="bi bi-pin-angle-fill"></i>
                <span class="nome" id="nomeItemSaida">-</span>
              </div>
              <div class="detalhes">
                <div class="detalhe"><i class="bi bi-box"></i> Estoque: <strong id="estoqueItemSaida">0</strong></div>
                <div class="detalhe"><i class="bi bi-rulers"></i> Unidade: <strong id="unidadeItemSaida">UN</strong></div>
              </div>
            </div>

            <!-- Linha 2: Quantidade, Data -->
            <div class="form-row">
              <div class="form-grupo">
                <label for="qtdSaida">Quantidade *</label>
                <input type="number" id="qtdSaida" required min="1" placeholder="0">
              </div>
              <div class="form-grupo">
                <label for="dataSaida">Data *</label>
                <input type="date" id="dataSaida" required>
              </div>
            </div>

            <!-- Linha 3: Quem Retirou, Local de AplicaÃ§Ã£o, Operador -->
            <div class="form-row-tres">
              <div class="form-grupo">
                <label for="quemRetirouSaida">Quem Retirou *</label>
                <input type="text" id="quemRetirouSaida" required placeholder="Nome de quem retirou">
              </div>
              <div class="form-grupo">
                <label for="localAplicacaoSaida">Local de AplicaÃ§Ã£o <span class="opcional">(opc)</span></label>
                <input type="text" id="localAplicacaoSaida" placeholder="Onde serÃ¡ usado">
              </div>
              <div class="form-grupo">
                <label for="operadorSaida">Operador *</label>
                <input type="text" id="operadorSaida" required placeholder="Quem registrou">
              </div>
            </div>

            <!-- ObservaÃ§Ãµes -->
            <div class="form-grupo">
              <label for="obsSaida">ObservaÃ§Ãµes <span class="opcional">(opc)</span></label>
              <textarea id="obsSaida" rows="2" placeholder="ObservaÃ§Ãµes adicionais..."></textarea>
            </div>

            <div class="btn-group">
              <button type="submit" class="btn btn-saida"><i class="bi bi-check-lg"></i> Registrar SaÃ­da</button>
              <button type="reset" class="btn btn-secondary"><i class="bi bi-arrow-clockwise"></i> Limpar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- ================== ABA HISTÃ“RICO ================== -->
      <div id="tab-historico" class="tab-content">
        <div class="filtros">
          <h3><i class="bi bi-funnel"></i> Filtros</h3>
          <div class="form-row-quatro">
            <div class="form-grupo">
              <label for="filtroTipo">Tipo</label>
              <select id="filtroTipo">
                <option value="">Todos</option>
                <option value="entrada">ðŸ“¥ Entradas</option>
                <option value="saida">ðŸ“¤ SaÃ­das</option>
              </select>
            </div>
            <div class="form-grupo">
              <label for="filtroCategoriaHist">Categoria</label>
              <select id="filtroCategoriaHist">
                <option value="">Todas</option>
              </select>
            </div>
            <div class="form-grupo">
              <label for="filtroDataInicio">Data Inicial</label>
              <input type="date" id="filtroDataInicio">
            </div>
            <div class="form-grupo">
              <label for="filtroDataFim">Data Final</label>
              <input type="date" id="filtroDataFim">
            </div>
          </div>
        </div>

        <div class="tabela-container">
          <table id="tabelaHistorico">
            <thead>
              <tr>
                <th>Data</th>
                <th>ID</th>
                <th>Tipo</th>
                <th>Item</th>
                <th>Obs</th>
                <th>Qtd</th>
                <th>Operador</th>
                <th>Detalhes</th>
                <th id="colAcoes" style="display: none;">AÃ§Ãµes</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="9" class="vazio">Nenhuma movimentaÃ§Ã£o registrada</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <script src="../js/sidebar.js"></script>
  <script src="../js/movimentos.js"></script>
</body>
</html>
